using UnityEngine;

public enum PowerType 
{
    Positive,
    Negative
}

public class PowerPoint : MonoBehaviour
{
    // Changed from 'type' to 'role' to match ConnectionManager usage
    public PowerType role;  
    public float voltage = 5f;

    private void Start()
    {
        // Ensure ConnectionData exists
        var connectionData = GetComponent<ConnectionData>();
        if (connectionData == null)
        {
            connectionData = gameObject.AddComponent<ConnectionData>();
        }

        // Set initial voltage based on role
        connectionData.U = role == PowerType.Positive ? voltage : 0f;

        // Ensure proper tag
        if (!CompareTag("ConnectionPower"))
        {
            gameObject.tag = "ConnectionPower";
        }

        Debug.Log($"PowerPoint initialized: {gameObject.name} as {role} with voltage {connectionData.U}V");
    }
}